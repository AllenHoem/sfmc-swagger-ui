sudo: required

language: ruby

services:
  - docker

env:
  global:
    - HEROKU_EMAIL="phillip.anderson@salesforce.com"
  matrix: 
    - secure: YooWhFXv53OZZGMhoIasPdZv0oxtRokTCGLdd6PBB1CwP7iZcwma5In6nmhc7pvI8COiOjyeEpp2MflFjQXRynEB8cUnd1Ju1iJPDzqcS3nfisiK9D6RTPCUD1DK8CCysSC99hCBT6dRUcTNhMpIhqEdzXycS9DjOYZHUnJTR0n1VfwWvKDLopj8Tuf+X5MkWjZ5MWsDT8sTsVItJjHXmTsvuZGJOTQVXFdxMmLo54PtCNcvSq+75uNSIUNl+CBuGNePs0W2EwkzEwdWEWLhR/VzjDaS8gov3/Hqf1ECEbIRqqOB6xTeIG1dg5+Iqg/s6ghCwVOkFxSxY+CwyuguFM2ZG2a8yGzNof578lUXQU0AKajmzSxgE0eB1UZbPkcGJNCkzl3FO74psBfQCy8hgdcsedr0Y+cvaezqKkKYXQ/UhOFK8soZzPfHkISaPBC4xLDmVN6bzf4PMgDGPqZD8BTQDV7VvDQ8G5Z/vEoc1vjCDn15GmBvIvMqRFkUYIi0Z9jih5v6jvj9/5iLJTIpoFaJYrnZB129WqHa8zdW1zc2fo5W21NllsV0LJ7y6lPaSbUe2ld7ulKxhUBCuCKVjM406isYJQdzjJz0x+7Kz/F7D4MRIx7ECcB1AQs0eBiltP/A6K4ltnBJbfmO9eWIPO3hBXoyCilmkd2a+0IoaWQ=
    # This Key is the encrypted value for the Authorization created specifically for Travis: (HEROKU_API_KEY=<KEY>)
    #- secure: tKvOXeC84mG2tKQuBsNHNXYPNs9jibRu/eBStH6bbT8o0IccOUOJucS1aqFle62rutAYxcZMZ6kZ+nrn9JGtPcEQc/3uTko0GKWRx2RPw2yiDi6VP+T1MP9IkYFPo5IhW+QLvUl8lid6mTxzF/hHqnFxJU5UPGMnAZZ8oGDmBdx/0YwiYaoujd+LZSoNIBuLTA3uln0unj0bY8Od/VxYZo8dO6i1cAxcvXKCV5TSTFOm4dhfZhYMsHquOmA7VCZdhifxS0/tJpROIDBwmu+afFGfLQ/Rco/hl5Fu0hIQu8sUgz+KmGe3IXGcfm3tekdn1/XbcpmFIZy7iRS9El29PqLhbgqkc85pYdYEqnaABn+ZgEmcYeR+ixggvZ13tDMUhAOWlnaF6w+uajmsP8946fNSGMk2glPg2JSm9tcuWyhBtPPSwx5lOq+k3E/X0kxL+pJg9sVvwymYVax5xEMg+SHP6RG6pjAj9T8srRlSGUgNc4rZ/cK5ukPo81Rx/OywZb+VpaIGvin9Jj//bWRXYMX9CA4RXB4+RXpfH/ul3zQYOlKOA4ZPQaBDP9Lnj/MaLPbShy+f+9DGaLObqEaTcOFCXDRbF12CAqhEd2Jbljbx7RLnolrdp5bBFSTsGWSUEN4zt6NorIJefPjvKXX6rN8OvL3OvM/goJzMETTVilw=

before_script:
  - docker rmi -f philasfwork/sfmc-swagger-ui
  - docker rmi -f registry.heroku.com/sfmc-travis-tests/web
  - chmod +x docker-commands.sh

script:
  - heroku run "./docker-commands.sh" -a sfmc-travis-tests
  #- docker build ./main -t philasfwork/sfmc-swagger-ui
  #- docker images
  #- curl -n -X PATCH https://api.heroku.com/apps/sfmc-travis-tests/formation -d "{ 'updates':[{'type':'web','docker_image':'philasfwork/sfmc-swagger-ui'}]}" -H "Content-Type: application/json" -H "Accept: application/vnd.heroku+json; version=3.docker-releases"
  #- heroku login
  #- heroku container:login
  #- heroku container:push web -a sfmc-travis-tests
  #- heroku container:release web

#deploy:
#  provider: heroku
#  api_key:
#    secure: Lp0vleoGnuyOouFWDNbcwqXT2AXYstaTmOrpRsppU8fFUKskCPup7xph6PPdnCL0DC2UMvUZfLXDrISUfbSOAu4dC4FoX9klR9B/8Bw2mikZb5lcNcjZwFKS3EdEdbYKIseol4bLq6Y0dDqf+ICKojNwwG7pQNmRBFhR8iKlrVKVEWHqwsZDOsYt+4JWjS4ASHwlaL6kFa3NpHxxH8AZ4xTBTFHzocNsbRYw+R7ZcVnsrDRBjUKryDPkwP4VVsIKuosP4sCWTfpRUxtLLvi1ahm5puSKGwGuPgCD44uYfe7X5zr/KdsblEZRhjvG2F4Vag543X0tb7jIDiHqn9DmlpDKGBf81MNPcnSY/jqFI6QwYOS5mN+nQK7ZyGsggUMmXfprfPff8klAAKfyCWBlf3c31O65TnWPfguw/zV0omNJmhWOndFt+9RVwoCILYBRWQqKQNp9urFZXk6JtiNtxtS43jk+QzW2eF3Q0Y6OdUtxJtbWy4GC9sQxEufTuWf/tOXE+fOw3tfDa3ngkt9zyuhJ0QQ/u4DuQ5oE2dB7yhWKwWR57pbOdXL58Jy1lak+IHJCXmspb1U5CahsQIW9QurO4z4l24x/LlhrSCs5Jr/W5o+J5tIJ8aY+REBWynsVKhU4t1lLVP6ndtWGESB2cNHr/imug7HzrvxkR6+LgIs=
#  app: sfmc-travis-tests